<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="../../logo32.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>kokutele labs - WebCodecs</title>
    <style>
      .box {
        display: flex;
        flex-direction: row;
      }
      .viewer {
        width: 720px;
        height: 620px;
        text-align: center;
        border: 1px solid gray;
        margin: 3px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <img src="../../logo32.png"/> kokutele labs - WebCodecs
      </h1>
      <p>
        You need to enable experimental flags of Chrome, before try this experimental web app.<br/>
        <a href="chrome://flags/#enable-experimental-web-platform-features" target="_blank">
          chrome://flags/#enable-experimental-web-platform-features
        </a><br/>
        M87 or upper will be required (currently churomium or canary)
      </p>
      <p style="color: #f00">
        Since `WebCodecs API` is experimental feature currently,
        it will be danger to run this demo app too long.
        It will leads to OS freezing, ocationally :\
      </p>
    </header>
    <main>
      <hr />
      <div>
        WebCodecs supported: 
        <span id="web-codecs-supported">detecting...</span>
      </div>
      <div>
        <label>
          sendPLI 
          <input type="checkbox" id="send-pli">
        </label>
        </label>
        <br/>
        <label>
          ignore sync
          <input type="checkbox" id="ignore-sync">
        </label>
        <br/>
        <label>
          emulated delay [msec]
          <input type="number" id="delay" min="0" max="1000" step="1"/>
        </label>
        <br/>
        <label>
          emulated packet lost ratio 
          <input type="number" id="packet-lost-ratio" min="0" max="1" step="0.1"/>
        </label>
        <br/>
        <button id="start">start</button>
      </div>
      <div class="box">
        <div class="encoder viewer">
          <h2>encoder</h2>
          <video autoplay></video>
          <div>
            timestamp: <span class="timestamp"></span><br />
            type: <span class="type"></span><br/>
            byteLength: <span class="byte-length"></span>
          </div>
        </div>
        <div class="decoder viewer">
          <h2>decoder</h2>
          <canvas></canvas>
        </div>
      </div>
      <div>
        <h2>references</h2>
        <ul>
          <li>
            <a href="https://wicg.github.io/web-codecs/">
              W3C CG draft - WebCodecs
            </a>
          </li>
        </ul>
      </div>
    </main>
    <footer>
      <hr />
      <a href="/labs">back to labs list</a><br />
      <hr />
      <a href="https://github.com/kokutele/kokutele" target="_blank" rel="noopener noreferer">repository - github.com/kokutele</a>
      <hr />
      &copy; 2020 <a href="https://medium.com/kokutele" target="_blank" rel="noopener noreferer">kokutele Project</a>
      (by <a href="https://twitter.com/komasshu"        target="_blank" rel="noopener noreferer">@komasshu</a>)
      <hr/>
    </footer>
  </body>
  <script src="./script.js"></script>
</html>